#! /c/iverilog/bin/vvp
:ivl_version "0.9.7 " "(v0_9_7)";
:vpi_time_precision + 0;
:vpi_module "system";
:vpi_module "v2005_math";
:vpi_module "va_math";
S_012334D8 .scope module, "tb" "tb" 2 3;
 .timescale 0 0;
v01240708_0 .var/i "i", 31 0;
v01240760_0 .var "m_clk", 0 0;
v01240B80_0 .var "m_i_alu_value_1", 31 0;
v01240C30_0 .var "m_i_alu_value_2", 31 0;
v01240AD0_0 .var "m_i_ce", 0 0;
v01240918_0 .var "m_i_data_rs_1", 31 0;
v01240C88_0 .var "m_i_data_rs_2", 31 0;
v01240F48_0 .var "m_i_mask_1", 3 0;
v01240FF8_0 .var "m_i_mask_2", 3 0;
v01240A78_0 .var "m_i_wr_en_1", 0 0;
v01240B28_0 .var "m_i_wr_en_2", 0 0;
v012408C0_0 .net "m_o_load_data_1", 31 0, L_01209088; 1 drivers
v01240600_0 .net "m_o_load_data_2", 31 0, L_01209280; 1 drivers
v01240CE0_0 .var "m_rst", 0 0;
S_01232F88 .scope task, "load_data_1" "load_data_1" 2 84, 2 84, S_012334D8;
 .timescale 0 0;
v01240EF0_0 .var "addr", 31 0;
TD_tb.load_data_1 ;
    %wait E_01238D30;
    %set/v v01240AD0_0, 1, 1;
    %load/v 8, v01240EF0_0, 32;
    %set/v v01240B80_0, 8, 32;
    %wait E_01238D30;
    %vpi_call 2 90 "$display", "[%0t] Addr=%0d => Load Data=0x%08h", $time, v01240B80_0, v012408C0_0;
    %end;
S_01232CE0 .scope task, "load_data_2" "load_data_2" 2 94, 2 94, S_012334D8;
 .timescale 0 0;
v01240BD8_0 .var "addr", 31 0;
TD_tb.load_data_2 ;
    %wait E_01238D30;
    %set/v v01240AD0_0, 1, 1;
    %load/v 8, v01240BD8_0, 32;
    %set/v v01240C30_0, 8, 32;
    %wait E_01238D30;
    %vpi_call 2 100 "$display", "[%0t] Addr=%0d => Load Data=0x%08h", $time, v01240C30_0, v01240600_0;
    %end;
S_01232E78 .scope task, "reset" "reset" 2 47, 2 47, S_012334D8;
 .timescale 0 0;
v01240DE8_0 .var/i "cycles", 31 0;
TD_tb.reset ;
    %set/v v01240CE0_0, 0, 1;
    %load/v 8, v01240DE8_0, 32;
T_2.0 %cmp/s 0, 8, 32;
    %jmp/0xz T_2.1, 5;
    %add 8, 1, 32;
    %wait E_01238D30;
    %jmp T_2.0;
T_2.1 ;
    %set/v v01240CE0_0, 1, 1;
    %wait E_01238D30;
    %end;
S_01232F00 .scope task, "store_data_1" "store_data_1" 2 57, 2 57, S_012334D8;
 .timescale 0 0;
v0123A4D0_0 .var "addr", 31 0;
v0123A268_0 .var "data", 31 0;
v0123A2C0_0 .var "mask", 3 0;
TD_tb.store_data_1 ;
    %wait E_01238D30;
    %set/v v01240AD0_0, 1, 1;
    %set/v v01240A78_0, 1, 1;
    %load/v 8, v0123A2C0_0, 4;
    %set/v v01240F48_0, 8, 4;
    %load/v 8, v0123A4D0_0, 32;
    %set/v v01240B80_0, 8, 32;
    %load/v 8, v0123A268_0, 32;
    %set/v v01240918_0, 8, 32;
    %wait E_01238D30;
    %set/v v01240A78_0, 0, 1;
    %end;
S_01232130 .scope task, "store_data_2" "store_data_2" 2 70, 2 70, S_012334D8;
 .timescale 0 0;
v0123A420_0 .var "addr", 31 0;
v0123A1B8_0 .var "data", 31 0;
v0123A478_0 .var "mask", 3 0;
E_01238D30 .event posedge, v01204E28_0;
TD_tb.store_data_2 ;
    %wait E_01238D30;
    %set/v v01240AD0_0, 1, 1;
    %set/v v01240B28_0, 1, 1;
    %load/v 8, v0123A478_0, 4;
    %set/v v01240FF8_0, 8, 4;
    %load/v 8, v0123A420_0, 32;
    %set/v v01240C30_0, 8, 32;
    %load/v 8, v0123A1B8_0, 32;
    %set/v v01240C88_0, 8, 32;
    %wait E_01238D30;
    %set/v v01240B28_0, 0, 1;
    %end;
S_012336F8 .scope module, "m" "memory" 2 18, 3 5, S_012334D8;
 .timescale 0 0;
L_01209088 .functor BUFZ 32, L_01240D38, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
L_01209280 .functor BUFZ 32, L_01240D90, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
v012381C8_0 .net *"_s0", 31 0, L_01240D38; 1 drivers
v0120D0B0_0 .net *"_s4", 31 0, L_01240D90; 1 drivers
v0120D108 .array "data_mem_1", 0 31, 31 0;
v0120D160 .array "data_mem_2", 0 31, 31 0;
v01204DD0_0 .var/i "i", 31 0;
v01204E28_0 .net "m_clk", 0 0, v01240760_0; 1 drivers
v01204E80_0 .net "m_i_alu_value_1", 31 0, v01240B80_0; 1 drivers
v0120A0B8_0 .net "m_i_alu_value_2", 31 0, v01240C30_0; 1 drivers
v0120A110_0 .net "m_i_ce", 0 0, v01240AD0_0; 1 drivers
v0120A168_0 .net "m_i_data_rs_1", 31 0, v01240918_0; 1 drivers
v0120A1C0_0 .net "m_i_data_rs_2", 31 0, v01240C88_0; 1 drivers
v01206DE8_0 .net "m_i_mask_1", 3 0, v01240F48_0; 1 drivers
v01206E40_0 .net "m_i_mask_2", 3 0, v01240FF8_0; 1 drivers
v0123A318_0 .net "m_i_wr_en_1", 0 0, v01240A78_0; 1 drivers
v0123A370_0 .net "m_i_wr_en_2", 0 0, v01240B28_0; 1 drivers
v0123A210_0 .alias "m_o_load_data_1", 31 0, v012408C0_0;
v0123A3C8_0 .alias "m_o_load_data_2", 31 0, v01240600_0;
v0123A160_0 .net "m_rst", 0 0, v01240CE0_0; 1 drivers
E_01238D90 .event negedge, v0123A160_0, v01204E28_0;
L_01240D38 .array/port v0120D108, v01240B80_0;
L_01240D90 .array/port v0120D160, v01240C30_0;
    .scope S_012336F8;
T_5 ;
    %wait E_01238D90;
    %load/v 8, v0123A160_0, 1;
    %inv 8, 1;
    %jmp/0xz  T_5.0, 8;
    %set/v v01204DD0_0, 0, 32;
T_5.2 ;
    %load/v 8, v01204DD0_0, 32;
   %cmpi/s 8, 32, 32;
    %jmp/0xz T_5.3, 5;
    %load/v 8, v01204DD0_0, 32;
    %ix/getv/s 3, v01204DD0_0;
    %jmp/1 t_0, 4;
    %ix/load 0, 32, 0; word width
    %ix/load 1, 0, 0; part off
    %assign/av v0120D108, 0, 8;
t_0 ;
    %load/v 8, v01204DD0_0, 32;
    %ix/getv/s 3, v01204DD0_0;
    %jmp/1 t_1, 4;
    %ix/load 0, 32, 0; word width
    %ix/load 1, 0, 0; part off
    %assign/av v0120D160, 0, 8;
t_1 ;
    %ix/load 0, 1, 0;
    %load/vp0/s 8, v01204DD0_0, 32;
    %set/v v01204DD0_0, 8, 32;
    %jmp T_5.2;
T_5.3 ;
    %jmp T_5.1;
T_5.0 ;
    %load/v 8, v0120A110_0, 1;
    %jmp/0xz  T_5.4, 8;
    %load/v 8, v0123A318_0, 1;
    %jmp/0xz  T_5.6, 8;
    %load/v 8, v01206DE8_0, 1; Only need 1 of 4 bits
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.8, 8;
    %load/v 8, v0120A168_0, 8; Only need 8 of 32 bits
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v01204E80_0;
    %jmp/1 t_2, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 0, 0; part off
    %assign/av v0120D108, 0, 8;
t_2 ;
    %jmp T_5.9;
T_5.8 ;
    %ix/load 1, 1, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.10, 4;
    %load/x1p 8, v01206DE8_0, 1;
    %jmp T_5.11;
T_5.10 ;
    %mov 8, 2, 1;
T_5.11 ;
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.12, 8;
    %ix/load 1, 8, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.14, 4;
    %load/x1p 8, v0120A168_0, 8;
    %jmp T_5.15;
T_5.14 ;
    %mov 8, 2, 8;
T_5.15 ;
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v01204E80_0;
    %jmp/1 t_3, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 8, 0; part off
    %assign/av v0120D108, 0, 8;
t_3 ;
    %jmp T_5.13;
T_5.12 ;
    %ix/load 1, 2, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.16, 4;
    %load/x1p 8, v01206DE8_0, 1;
    %jmp T_5.17;
T_5.16 ;
    %mov 8, 2, 1;
T_5.17 ;
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.18, 8;
    %ix/load 1, 16, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.20, 4;
    %load/x1p 8, v0120A168_0, 8;
    %jmp T_5.21;
T_5.20 ;
    %mov 8, 2, 8;
T_5.21 ;
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v01204E80_0;
    %jmp/1 t_4, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 16, 0; part off
    %assign/av v0120D108, 0, 8;
t_4 ;
    %jmp T_5.19;
T_5.18 ;
    %ix/load 1, 3, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.22, 4;
    %load/x1p 8, v01206DE8_0, 1;
    %jmp T_5.23;
T_5.22 ;
    %mov 8, 2, 1;
T_5.23 ;
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.24, 8;
    %ix/load 1, 24, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.26, 4;
    %load/x1p 8, v0120A168_0, 8;
    %jmp T_5.27;
T_5.26 ;
    %mov 8, 2, 8;
T_5.27 ;
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v01204E80_0;
    %jmp/1 t_5, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 24, 0; part off
    %assign/av v0120D108, 0, 8;
t_5 ;
T_5.24 ;
T_5.19 ;
T_5.13 ;
T_5.9 ;
T_5.6 ;
    %load/v 8, v0123A370_0, 1;
    %jmp/0xz  T_5.28, 8;
    %load/v 8, v01206E40_0, 1; Only need 1 of 4 bits
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.30, 8;
    %load/v 8, v0120A1C0_0, 8; Only need 8 of 32 bits
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v0120A0B8_0;
    %jmp/1 t_6, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 0, 0; part off
    %assign/av v0120D160, 0, 8;
t_6 ;
    %jmp T_5.31;
T_5.30 ;
    %ix/load 1, 1, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.32, 4;
    %load/x1p 8, v01206E40_0, 1;
    %jmp T_5.33;
T_5.32 ;
    %mov 8, 2, 1;
T_5.33 ;
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.34, 8;
    %ix/load 1, 8, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.36, 4;
    %load/x1p 8, v0120A1C0_0, 8;
    %jmp T_5.37;
T_5.36 ;
    %mov 8, 2, 8;
T_5.37 ;
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v0120A0B8_0;
    %jmp/1 t_7, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 8, 0; part off
    %assign/av v0120D160, 0, 8;
t_7 ;
    %jmp T_5.35;
T_5.34 ;
    %ix/load 1, 2, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.38, 4;
    %load/x1p 8, v01206E40_0, 1;
    %jmp T_5.39;
T_5.38 ;
    %mov 8, 2, 1;
T_5.39 ;
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.40, 8;
    %ix/load 1, 16, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.42, 4;
    %load/x1p 8, v0120A1C0_0, 8;
    %jmp T_5.43;
T_5.42 ;
    %mov 8, 2, 8;
T_5.43 ;
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v0120A0B8_0;
    %jmp/1 t_8, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 16, 0; part off
    %assign/av v0120D160, 0, 8;
t_8 ;
    %jmp T_5.41;
T_5.40 ;
    %ix/load 1, 3, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.44, 4;
    %load/x1p 8, v01206E40_0, 1;
    %jmp T_5.45;
T_5.44 ;
    %mov 8, 2, 1;
T_5.45 ;
; Save base=8 wid=1 in lookaside.
    %jmp/0xz  T_5.46, 8;
    %ix/load 1, 24, 0;
    %mov 4, 0, 1;
    %jmp/1 T_5.48, 4;
    %load/x1p 8, v0120A1C0_0, 8;
    %jmp T_5.49;
T_5.48 ;
    %mov 8, 2, 8;
T_5.49 ;
; Save base=8 wid=8 in lookaside.
    %ix/getv 3, v0120A0B8_0;
    %jmp/1 t_9, 4;
    %ix/load 0, 8, 0; word width
    %ix/load 1, 24, 0; part off
    %assign/av v0120D160, 0, 8;
t_9 ;
T_5.46 ;
T_5.41 ;
T_5.35 ;
T_5.31 ;
T_5.28 ;
T_5.4 ;
T_5.1 ;
    %jmp T_5;
    .thread T_5;
    .scope S_012334D8;
T_6 ;
    %set/v v01240760_0, 0, 1;
T_6.0 ;
    %delay 5, 0;
    %load/v 8, v01240760_0, 1;
    %inv 8, 1;
    %set/v v01240760_0, 8, 1;
    %jmp T_6.0;
    %end;
    .thread T_6;
    .scope S_012334D8;
T_7 ;
    %vpi_call 2 42 "$dumpfile", "./waveform/memory.vcd";
    %vpi_call 2 43 "$dumpvars", 1'sb0, S_012334D8;
    %end;
    .thread T_7;
    .scope S_012334D8;
T_8 ;
    %movi 8, 2, 32;
    %set/v v01240DE8_0, 8, 32;
    %fork TD_tb.reset, S_01232E78;
    %join;
    %vpi_call 2 109 "$display", "\012==== TEST 1: STORE WORD ====";
    %set/v v0123A2C0_0, 1, 4;
    %movi 8, 2864434397, 32;
    %set/v v0123A268_0, 8, 32;
    %movi 8, 3, 32;
    %set/v v0123A4D0_0, 8, 32;
    %fork TD_tb.store_data_1, S_01232F00;
    %join;
    %movi 8, 3, 32;
    %set/v v01240EF0_0, 8, 32;
    %fork TD_tb.load_data_1, S_01232F88;
    %join;
    %vpi_call 2 114 "$display", "\012==== TEST 2: STORE HALF ====";
    %movi 8, 3, 4;
    %set/v v0123A478_0, 8, 4;
    %movi 8, 61183, 32;
    %set/v v0123A1B8_0, 8, 32;
    %movi 8, 4, 32;
    %set/v v0123A420_0, 8, 32;
    %fork TD_tb.store_data_2, S_01232130;
    %join;
    %movi 8, 4, 32;
    %set/v v01240BD8_0, 8, 32;
    %fork TD_tb.load_data_2, S_01232CE0;
    %join;
    %vpi_call 2 119 "$display", "\012==== TEST 3: STORE BYTE ====";
    %movi 8, 1, 4;
    %set/v v0123A2C0_0, 8, 4;
    %movi 8, 153, 32;
    %set/v v0123A268_0, 8, 32;
    %movi 8, 5, 32;
    %set/v v0123A4D0_0, 8, 32;
    %fork TD_tb.store_data_1, S_01232F00;
    %join;
    %movi 8, 5, 32;
    %set/v v01240EF0_0, 8, 32;
    %fork TD_tb.load_data_1, S_01232F88;
    %join;
    %vpi_call 2 124 "$display", "\012==== TEST 4: MULTI WRITE LOOP ====";
    %set/v v01240708_0, 0, 32;
T_8.0 ;
    %load/v 8, v01240708_0, 32;
   %cmpi/s 8, 8, 32;
    %jmp/0xz T_8.1, 5;
    %set/v v0123A2C0_0, 1, 4;
    %load/v 8, v01240708_0, 32;
    %mov 40, 39, 1;
    %muli 8, 16, 33;
    %addi 8, 8, 33;
    %set/v v0123A268_0, 8, 32;
    %load/v 8, v01240708_0, 32;
    %set/v v0123A4D0_0, 8, 32;
    %fork TD_tb.store_data_1, S_01232F00;
    %join;
    %set/v v0123A478_0, 1, 4;
    %load/v 8, v01240708_0, 32;
    %mov 40, 39, 1;
    %muli 8, 16, 33;
    %addi 8, 8, 33;
    %set/v v0123A1B8_0, 8, 32;
    %load/v 8, v01240708_0, 32;
    %set/v v0123A420_0, 8, 32;
    %fork TD_tb.store_data_2, S_01232130;
    %join;
    %ix/load 0, 1, 0;
    %load/vp0/s 8, v01240708_0, 32;
    %set/v v01240708_0, 8, 32;
    %jmp T_8.0;
T_8.1 ;
    %set/v v01240708_0, 0, 32;
T_8.2 ;
    %load/v 8, v01240708_0, 32;
   %cmpi/s 8, 8, 32;
    %jmp/0xz T_8.3, 5;
    %load/v 8, v01240708_0, 32;
    %set/v v01240EF0_0, 8, 32;
    %fork TD_tb.load_data_1, S_01232F88;
    %join;
    %load/v 8, v01240708_0, 32;
    %set/v v01240BD8_0, 8, 32;
    %fork TD_tb.load_data_2, S_01232CE0;
    %join;
    %ix/load 0, 1, 0;
    %load/vp0/s 8, v01240708_0, 32;
    %set/v v01240708_0, 8, 32;
    %jmp T_8.2;
T_8.3 ;
    %vpi_call 2 134 "$display", "\012Simulation Done.\012";
    %delay 50, 0;
    %vpi_call 2 135 "$finish";
    %end;
    .thread T_8;
# The file index is used to find the file name in the following table.
:file_names 4;
    "N/A";
    "<interactive>";
    ".\test\tb_memory.v";
    "././source/memory.v";
